(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(26),i=n.n(r),s=(n(87),n(3)),o=n(67),l=n(8),j=n(21),d=n.n(j),u=n(1);var b=function(e){var t=e.handleClick,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(""),l=Object(s.a)(o,2),j=l[0],b=l[1],h=Object(a.useState)(""),O=Object(s.a)(h,2),f=O[0],p=O[1];return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({username:r,password:j,password_confirmation:f})}).then((function(e){e.ok?e.json().then((function(e){return d()(e.username+"created, please log in")})):e.json().then((function(e){return alert(e.errors)}))})),t()},children:[Object(u.jsx)("label",{for:"createUser",children:Object(u.jsx)("b",{children:"Username"})}),Object(u.jsx)("input",{type:"text",placeholder:"...",required:!0,onChange:function(e){i(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{for:"pass",children:Object(u.jsx)("b",{children:"Password? "})}),Object(u.jsx)("input",{type:"password",placeholder:"...",required:!0,onChange:function(e){b(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",placeholder:"...",required:!0,onChange:function(e){p(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"submit",value:"Create Profile"})]})})};var h=function(e){var t=e.login,n=Object(a.useState)(!1),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)("visible"),l=Object(s.a)(o,2),j=l[0],d=l[1],h=Object(a.useState)(""),O=Object(s.a)(h,2),f=O[0],p=O[1],x=Object(a.useState)(""),m=Object(s.a)(x,2),v=m[0],y=m[1];function g(){i(!r),d("visible"===j?"hidden":"visible")}return Object(u.jsxs)("div",{id:"loginPage",children:[Object(u.jsx)("h1",{children:" Your Pantry"}),Object(u.jsx)("p",{children:" An app to help you track all the food in your house. From expiration warnings to recipe lists this app is designed to be the only thing you need when planning meals or grocery runs."}),Object(u.jsxs)("form",{style:{visibility:j},onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({username:f,password:v})}).then((function(e){e.ok?e.json().then((function(e){return t(e.username)})):e.json().then((function(e){return alert(e.errors)}))}))},children:[Object(u.jsx)("label",{for:"uname",children:Object(u.jsx)("b",{children:"Username: "})}),Object(u.jsx)("input",{type:"text",placeholder:"Name",required:!0,onChange:function(e){p(e.target.value)},name:"name",className:"userLogin"}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{for:"pass",children:Object(u.jsx)("b",{children:"Password: "})}),Object(u.jsx)("input",{type:"password",placeholder:"Enter Password",required:!0,name:"password",onChange:function(e){y(e.target.value)},className:"userLogin"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"submit",value:"Login"})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{id:"createUser",children:[Object(u.jsx)("button",{value:"Create User",onClick:g,className:"userButton",children:r?"Login":"Create User"}),r?Object(u.jsx)(b,{handleClick:g}):null]})]})},O=n(13),f=n(19);var p=function(e){e.setUser;var t=e.user;return Object(u.jsxs)("div",{className:"welcome",children:[Object(u.jsxs)("h1",{children:[" Welcome to your Pantry, ",t,"!"]}),Object(u.jsxs)("p",{className:"appExplination",children:["To add new ingredients, spices, or premade meals to your pantry's inventory visit the ",Object(u.jsx)(f.LinkContainer,{to:"/allFoods",children:Object(u.jsx)(O.a,{variant:"outline-info",children:" All Foods "})})," page. Your ",Object(u.jsx)(f.LinkContainer,{to:"/inventory",children:Object(u.jsx)(O.a,{variant:"outline-info",children:"Pantry"})})," will show you everything you own. If you want a more specific list you can review your ",Object(u.jsx)(f.LinkContainer,{to:"/ingredients",children:Object(u.jsx)(O.a,{variant:"outline-info",children:" ingredients "})})," and ",Object(u.jsx)(f.LinkContainer,{to:"/spices",children:Object(u.jsx)(O.a,{variant:"outline-info",children:" spices "})}),". Or check out your ",Object(u.jsx)(f.LinkContainer,{to:"/recipes",children:Object(u.jsx)(O.a,{variant:"outline-info",children:" recipe book "})})," for some extra inspiration and to ensure you have everything you need. If you don't have the time or energy to cook, just head over to your ",Object(u.jsx)(f.LinkContainer,{to:"/meals",children:Object(u.jsx)(O.a,{variant:"outline-info",children:"premade meals "})})," or ",Object(u.jsx)(f.LinkContainer,{to:"/snacks",children:Object(u.jsx)(O.a,{variant:"outline-info",children:"snacks "})}),"and pick something to eat NOW!"]})]})},x=n(14),m=n(90),v=n(81),y=n(16),g=n(18);var C=function(e){var t=e.food,n=e.finalizeAdd,c=e.deleteFromAll,r=Object(a.useState)(!1),i=Object(s.a)(r,2),o=i[0],l=i[1],j=Object(a.useState)(""),b=Object(s.a)(j,2),h=b[0],f=b[1];function p(){l(!o)}return Object(a.useEffect)((function(){var e=new Date;e.setDate(e.getDate()+t.ave_expiration_length);var n=e.getDate(),a=e.getMonth()+1,c=e.getFullYear();f("".concat(c,"-").concat(a,"-").concat(n))}),[t.ave_expiration_length]),Object(u.jsx)("div",{className:"allFoodsCard",children:Object(u.jsxs)(g.a,{style:{width:"13rem"},bg:"secondary",children:[Object(u.jsx)(g.a.Img,{src:t.url,style:{height:"10rem"}}),Object(u.jsxs)(g.a.Body,{children:[Object(u.jsx)(g.a.Title,{id:t.id,children:t.name}),o?Object(u.jsxs)(g.a.Text,{children:[" ",Object(u.jsxs)(y.a,{children:[Object(u.jsx)(y.a.Control,{type:"date",placeholder:"expiration",onChange:function(e){f(e.target.value)}}),Object(u.jsx)(O.a,{variant:"success",onClick:p,children:"Submit"})]})]}):Object(u.jsxs)(g.a.Text,{children:[h,Object(u.jsx)(O.a,{style:{marginLeft:"15px"},variant:"danger",onClick:p,children:"Edit"})]}),Object(u.jsx)(O.a,{variant:"success",onClick:function(e){e.preventDefault();var a=e.target.parentNode.firstChild.id;fetch("/pantryitems",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({id:a,expiration:h})}).then((function(e){return e.json()})).then((function(e){d()(t.name+" added to pantry"),n(e,t)}))},children:"Add to Pantry"}),Object(u.jsx)(O.a,{variant:"danger",className:"delete",onClick:function(){d()("This will delete food for ALL USERS. Only delete if you are sure [Admin ONLY]",{buttons:{cancel:"Nevermind",catch:{text:"Yes, delete!",value:"confirm"}}}).then((function(e){switch(e){case"confirm":fetch("/foods/".concat(t.id),{method:"DELETE"}).then((function(e){e.ok&&c(t.id)})),d()("Deleted");break;default:d()("Left Alone")}}))},children:Object(u.jsx)("span",{children:"X"})})]})]})})};var S=function(e){var t=e.finalizeAdd,n=(e.createNewFood,Object(a.useState)([])),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)([]),l=Object(s.a)(o,2),j=l[0],b=l[1],h=Object(a.useState)([]),f=Object(s.a)(h,2),p=f[0],g=f[1],S=Object(a.useState)([]),k=Object(s.a)(S,2),w=k[0],N=k[1],L=Object(a.useState)([]),P=Object(s.a)(L,2),I=P[0],F=P[1],A=Object(a.useState)([]),T=Object(s.a)(A,2),E=T[0],D=T[1];Object(a.useEffect)((function(){fetch("/foods").then((function(e){return e.json()})).then((function(e){i(e),b(e)}))}),[]);var R=Object(u.jsx)(v.a,{id:"popover-positioned-bottom",title:"Popover bottom",children:Object(u.jsxs)(y.a,{onSubmit:function(e){e.preventDefault();var t={name:p,url:I,ave_expiration_length:E,category:w};fetch("/foods",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify(t)}).then((function(e){e.ok?e.json().then((function(e){var t=[].concat(Object(x.a)(r),[e]);i(t),b(t)})):d()("All foods require a name, and a genre")})),d()("Created ".concat(p,", add another?")),e.target.reset()},children:[Object(u.jsx)(y.a.Control,{type:"text",placeholder:"New Food Name",className:"me-2",onChange:function(e){var t=e.target.value;return g(t)}}),Object(u.jsx)(y.a.Control,{type:"url",placeholder:"New Food Image URL",className:"me-2",onChange:function(e){var t=e.target.value;return F(t)}}),Object(u.jsx)(y.a.Control,{type:"text",placeholder:"Average Days to Expiration",className:"me-2",onChange:function(e){var t=e.target.value;return D(t)}}),Object(u.jsxs)(y.a.Select,{"aria-label":"Default select example",onChange:function(e){var t=e.target.value;return N(t)},children:[Object(u.jsx)("option",{value:"ingredient",children:"Ingredient"}),Object(u.jsx)("option",{value:"spice",children:"Spice"}),Object(u.jsx)("option",{value:"snack",children:"Snack"}),Object(u.jsx)("option",{value:"premade",children:"Premade Meal"})]}),Object(u.jsx)(O.a,{type:"Submit",children:"Create Food"})]})});function _(e){console.log("delete run");var t=r.filter((function(t){return t.id!==e}));i(t),b(t)}return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"All Foods"}),Object(u.jsxs)("div",{className:"allSearch",children:[Object(u.jsx)(y.a,{className:"d-flex",children:Object(u.jsx)(y.a.Control,{type:"search",placeholder:"Search All Foods",className:"me-2","aria-label":"Search",onChange:function(e){var t=e.target.value,n=r.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));b(n)}})}),Object(u.jsx)("h3",{children:" OR FILTER BY:"}),Object(u.jsxs)(y.a.Select,{"aria-label":"Default select example",onChange:function(e){var t=e.target.value;if("All Foods"===t)b(r);else{var n=r.filter((function(e){return e.category===t}));b(n)}},children:[Object(u.jsx)("option",{children:"All Foods"}),Object(u.jsx)("option",{value:"ingredient",children:"Ingredients"}),Object(u.jsx)("option",{value:"spice",children:"Spices"}),Object(u.jsx)("option",{value:"premade",children:"Pre-Made Meals"}),Object(u.jsx)("option",{value:"snack",children:"Snacks"})]})]}),Object(u.jsxs)("div",{className:"addnewCategory",children:[Object(u.jsx)("br",{}),Object(u.jsx)(m.a,{trigger:"click",placement:"bottom",overlay:R,children:Object(u.jsx)(O.a,{children:" New Food"})})]}),Object(u.jsx)("br",{}),j.map((function(e){return Object(u.jsx)(C,{food:e,finalizeAdd:t,deleteFromAll:_},e.id)}))]})};var k=function(e){var t=e.food,n=e.deletePantryItem,c=Object(a.useState)(t.pantryitems[0].quantity),r=Object(s.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)(!1),j=Object(s.a)(l,2),b=j[0],h=j[1],f=Object(a.useState)(t.pantryitems[0].expiration_date),p=Object(s.a)(f,2),x=p[0],m=p[1];return Object(u.jsx)("div",{className:"pantryItemCard",children:Object(u.jsxs)(g.a,{style:{width:"13rem"},bg:"secondary",children:[Object(u.jsx)(g.a.Img,{src:t.url,style:{height:"10rem"}}),Object(u.jsxs)(g.a.Body,{children:[Object(u.jsx)(g.a.Title,{id:t.id,children:t.name}),b?Object(u.jsxs)(g.a.Text,{children:[" ",Object(u.jsxs)(y.a,{children:[Object(u.jsx)(y.a.Control,{type:"date",placeholder:"expiration",onChange:function(e){m(e.target.value)}}),Object(u.jsx)(O.a,{variant:"success",onClick:function(){fetch("/pantryitems/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"Application/json"},body:JSON.stringify({expiration_date:x})}).then((function(e){return e.json()})).then((function(e){return m(e.expiration_date)})),h(!b)},children:"Submit"})]})]}):Object(u.jsxs)(g.a.Text,{children:["Expires: "+x,Object(u.jsx)(O.a,{style:{marginLeft:"15px"},variant:"danger",onClick:function(){h(!b)},children:"Edit"})]}),Object(u.jsx)(g.a.Text,{children:"Quantity: "+i}),Object(u.jsx)(O.a,{variant:"danger",style:{marginBottom:"-10px"},onClick:function(){d()("Remove item from Pantry/Reduce Quantity by 1?",{buttons:{cancel:"Nevermind!",catch:{text:"Delete",value:"catch"}}}).then((function(e){switch(e){case"catch":fetch("/pantryitems/".concat(t.id),{method:"DELETE"}).then((function(e){e.ok&&(i>1?o(i-1):n(t.id))})),d()("Removed");break;default:d()("Nothing happened.")}}))},children:"Remove"})]})]})})};var w=function(e){var t=e.pantry,n=e.deletePantryItem,c=e.searched,r=Object(a.useState)([]),i=Object(s.a)(r,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){if(void 0===c){var e=t.filter((function(e){return"ingredient"===e.category}));l(e)}else{console.log("searching...");var n=t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())&&"ingredient"===e.category}));l(n)}}),[t,c]),Object(u.jsxs)("div",{className:"pantrySection",children:[Object(u.jsx)("h2",{children:"Ingredients"}),o.map((function(e){return Object(u.jsx)(k,{food:e,deletePantryItem:n},e.id)}))]})};var N=function(e){var t=e.pantry,n=e.deletePantryItem,c=e.searched,r=Object(a.useState)([]),i=Object(s.a)(r,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){if(void 0===c){var e=t.filter((function(e){return"spice"===e.category}));l(e)}else{var n=t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())&&"spice"===e.category}));l(n)}}),[t,c]),Object(u.jsxs)("div",{className:"pantrySection",children:[Object(u.jsx)("h2",{children:" Spices"}),o.map((function(e){return Object(u.jsx)(k,{food:e,deletePantryItem:n},e.id)}))]})};var L=function(e){var t=e.pantry,n=e.deletePantryItem,c=e.searched,r=Object(a.useState)([]),i=Object(s.a)(r,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){if(void 0===c){var e=t.filter((function(e){return"premade"===e.category}));l(e)}else{var n=t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())&&"meal"===e.category}));l(n)}}),[t,c]),Object(u.jsxs)("div",{className:"pantrySection",children:[Object(u.jsx)("h2",{children:" Meals"}),o.map((function(e){return Object(u.jsx)(k,{food:e,deletePantryItem:n},e.id)}))]})},P=n(89),I=n(83),F=n(66),A=n(47);var T=function(e){var t=e.setUser,n=Object(a.useState)(!1),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(l.C)();return Object(u.jsx)(F.a,{bg:"info",expand:"lg",className:"navbar",children:Object(u.jsxs)(P.a,{fluid:!0,children:[Object(u.jsx)(f.LinkContainer,{to:"/",children:Object(u.jsx)(F.a.Brand,{children:"Food Tracker"})}),Object(u.jsx)(F.a.Toggle,{"aria-controls":"navbarScroll"}),Object(u.jsxs)(F.a.Collapse,{id:"navbarScroll",children:[Object(u.jsxs)(I.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0,children:[Object(u.jsxs)(A.a,{title:"Pantry",id:"navbarDropdown",show:r,onMouseEnter:function(e){i(!r)},onMouseLeave:function(e){i(!1)},children:[Object(u.jsx)(f.LinkContainer,{to:"/inventory",children:Object(u.jsx)(A.a.Item,{className:"dropdownItem",children:"Full Inventory"})}),Object(u.jsx)(f.LinkContainer,{to:"/ingredients",children:Object(u.jsx)(A.a.Item,{className:"dropdownItem",children:"Ingredients"})}),Object(u.jsx)(f.LinkContainer,{to:"/spices",children:Object(u.jsx)(A.a.Item,{children:"Spices"})}),Object(u.jsx)(f.LinkContainer,{to:"/snacks",children:Object(u.jsx)(A.a.Item,{children:"Snacks"})}),Object(u.jsx)(A.a.Divider,{}),Object(u.jsx)(f.LinkContainer,{to:"/meals",children:Object(u.jsx)(A.a.Item,{children:"Premade Meals"})})]}),Object(u.jsx)(f.LinkContainer,{to:"/allFoods",children:Object(u.jsx)(I.a.Link,{children:"All Foods"})}),Object(u.jsx)(f.LinkContainer,{to:"/recipes",children:Object(u.jsx)(I.a.Link,{children:"Meals/Recipes"})})]}),Object(u.jsx)(O.a,{variant:"danger",className:"logoutBtn",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&(t(null),o("/"))}))},children:"Logout"})]})]})})};var E=function(e){var t=e.food;return Object(u.jsx)("div",{className:"expiring",children:Object(u.jsxs)(g.a,{body:!0,bg:"danger",children:[t.name," expires ",t.pantryitems[0].expiration_date.slice(-5)]})})};var D=function(e){var t=e.pantry,n=e.deletePantryItem,c=e.searched,r=Object(a.useState)([]),i=Object(s.a)(r,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){if(void 0===c){var e=t.filter((function(e){return"snack"===e.category}));l(e)}else{var n=t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())&&"snack"===e.category}));l(n)}}),[t,c]),Object(u.jsxs)("div",{className:"pantrySection",children:[Object(u.jsx)("h2",{children:" Snacks"}),o.map((function(e){return Object(u.jsx)(k,{food:e,deletePantryItem:n},e.id)}))]})};var R=function(e){var t=e.pantry,n=e.deletePantryItem,c=e.user,r=Object(a.useState)(void 0),i=Object(s.a)(r,2),o=i[0],l=i[1],j=Object(a.useState)(""),d=Object(s.a)(j,2),b=d[0],h=d[1],f=Object(a.useState)([]),p=Object(s.a)(f,2),x=p[0],m=p[1];return Object(a.useEffect)((function(){var e=t.map((function(e){return e.pantryitems[0].expiration_date})).map((function(e){return new Date(e)})),n=new Date;n.setDate(n.getDate()+30);var a=e.filter((function(e){return e.getTime()<n.getTime()})).map((function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+(e.getDate()+1)).slice(-2)})),c=t.filter((function(e){return a.includes(e.pantryitems[0].expiration_date)}));m(c)}),[t]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{id:"pantryTitle",children:[c,"'s Pantry"]}),Object(u.jsxs)(y.a,{className:"pantrySearch",onSubmit:function(e){e.preventDefault();var t=e.target.firstChild.value;l(t),h("")},children:[Object(u.jsx)(y.a.Control,{type:"search",placeholder:"Search Pantry",className:"me-2","aria-label":"Search",value:b,onChange:function(e){h(e.target.value)}}),Object(u.jsx)(O.a,{variant:"success",children:Object(u.jsx)("span",{class:"reload",onClick:function(){l(undefined),h("")},children:"\u21bb"})}),Object(u.jsx)(O.a,{variant:"info",onClick:function(e){e.preventDefault();var t=e.target.parentNode.firstChild.value;l(t)},children:"Search"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{id:"expireTitle",children:" EXPIRING:"}),x.map((function(e){return Object(u.jsx)(E,{food:e},e.id)}))]}),Object(u.jsx)(w,{pantry:t,deletePantryItem:n,searched:o}),Object(u.jsx)(N,{pantry:t,deletePantryItem:n,searched:o}),Object(u.jsx)(D,{pantry:t,deletePantryItem:n,searched:o}),Object(u.jsx)(L,{pantry:t,deletePantryItem:n,searched:o})]})},_=n(114),q=n(112);var B=function(e){var t=e.recipe,n=e.pantry,c=e.recipeRemoval,r=Object(a.useState)(!1),i=Object(s.a)(r,2),o=i[0],l=i[1],j=Object(a.useState)(""),d=Object(s.a)(j,2),b=d[0],h=d[1],f=n.map((function(e){return e.name})),p=t.foods.map((function(e){return e.name})).filter((function(e){return f.includes(e)}));return console.log(t),Object(u.jsx)("div",{className:"recipeCard",children:Object(u.jsx)(g.a,{bg:"secondary",text:"light",children:Object(u.jsxs)(g.a.Body,{children:[Object(u.jsxs)(g.a.Title,{id:"recipeTitle",children:[t.name,Object(u.jsx)(O.a,{variant:"danger",onClick:function(){console.log(t.name),window.confirm("This will delete the recipe for all users. Are you sure you want to do this?")&&fetch("/recipes/".concat(t.id),{method:"DELETE"}).then((function(e){e.ok&&c(t.id)}))},children:"X"})]}),Object(u.jsx)(O.a,{variant:"success",onClick:function(){l(!o)},children:"Recipe Details"}),o?Object(u.jsxs)(_.a,{children:[Object(u.jsxs)(q.a,{className:"recipeTable",children:[Object(u.jsx)("tbody",{children:t.foods.map((function(e){return p.includes(e.name)?Object(u.jsx)("tr",{className:"testGood",children:Object(u.jsx)("td",{children:e.name},e.id)}):Object(u.jsx)("tr",{className:"testBad",children:Object(u.jsx)("td",{children:e.name},e.id)})}))}),Object(u.jsx)("tbody",{className:"test2",children:t.recipefoods.map((function(e){return Object(u.jsx)("tr",{children:Object(u.jsx)("td",{children:e.quantity},e.id)})}))})]}),""===b?Object(u.jsxs)(y.a,{onSubmit:function(e){e.preventDefault();var n=e.target.firstChild.value;console.log(n),fetch("/recipes/".concat(t.id),{method:"PATCH",headers:{"Content-type":"Application/json"},body:JSON.stringify({url:n})}).then((function(e){return e.json()})).then((function(e){return h(e.url)}))},children:[Object(u.jsx)(y.a.Control,{type:"url",placeholder:"Add Recipe Url"}),Object(u.jsx)(O.a,{type:"submit",variant:"success",children:"Submit"})]}):Object(u.jsx)(g.a.Link,{className:"link",href:b,target:"_blank",rel:"norefferer",children:"Full Recipe"})]}):null]})})})},U=n(113);var M=function(e){var t=e.food,n=e.assignFood,c=Object(a.useState)(""),r=Object(s.a)(c,2),i=r[0],o=r[1];return Object(u.jsxs)("div",{className:"ingredientSearch",children:[t.name,Object(u.jsxs)(y.a,{children:[Object(u.jsx)(y.a.Control,{type:"text","aria-label":"Ingredient Quantity",className:"ingredientQuantity",placeholder:"Quantity",onChange:function(e){e.preventDefault(),o(e.target.value)}}),Object(u.jsx)(O.a,{variant:"info",onClick:function(e){e.preventDefault(),n(t,i)},children:"Select"})]})]})};var J=function(e){var t=e.resetForm,n=e.foods,c=e.newRecipe,r=Object(a.useState)(""),i=Object(s.a)(r,2),o=i[0],l=i[1],j=Object(a.useState)(""),b=Object(s.a)(j,2),h=b[0],f=b[1],p=Object(a.useState)([]),m=Object(s.a)(p,2),v=m[0],g=m[1],C=Object(a.useState)([]),S=Object(s.a)(C,2),k=S[0],w=S[1],N=Object(a.useState)([]),L=Object(s.a)(N,2),P=L[0],I=L[1];function F(e,t){g([].concat(Object(x.a)(v),[{food_id:e.id,quantity:t}])),w([]),I([].concat(Object(x.a)(P),[{name:e.name,quantity:t}]))}return Object(u.jsx)("div",{className:"recipeForm",children:Object(u.jsxs)(y.a,{onSubmit:function(e){e.preventDefault();var n={name:o,url:h,ingredients_attributes:v};fetch("/recipes",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?(e.json().then((function(e){return c(e)})),t()):d()("A name and at least one ingredient are required")}))},children:[Object(u.jsx)(y.a.Control,{type:"text",placeholder:"Recipe Name",className:"recipeFormControl",onChange:function(e){l(e.target.value)}}),Object(u.jsx)(y.a.Control,{type:"url",placeholder:"Link to Recipe Instructions",className:"recipeFormControl",onChange:function(e){f(e.target.value)}}),Object(u.jsx)(U.a,{children:Object(u.jsx)(y.a.Control,{type:"search",placeholder:"Add Ingredient",className:"recipeFormControl",name:"New Ingredient",onChange:function(e){var t=e.target.value;if(""===t)w("");else{var a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));0===a.length?alert("No Food item matches what you've typed. Please check spelling. You may have to add this food to all foods if it doesn't exist already"):w(a.map((function(e){return Object(u.jsx)(M,{food:e,assignFood:F})})))}},autocomplete:"off"})}),k,Object(u.jsx)("ul",{children:P.map((function(e){return Object(u.jsx)("li",{children:e.name+", Quantity: "+e.quantity})}))}),Object(u.jsx)(O.a,{variant:"success",type:"submit",children:"Create"})]})})};var Y=function(e){var t=e.pantry,n=Object(a.useState)(!1),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)([]),l=Object(s.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)([]),h=Object(s.a)(b,2),f=h[0],p=h[1];function m(e){console.log(e);var t=j.filter((function(t){return t.id!==e}));console.log(t),d(t)}return Object(a.useEffect)((function(){fetch("/recipes").then((function(e){return e.json()})).then((function(e){return d(e)}))}),[]),Object(a.useEffect)((function(){fetch("/foods").then((function(e){return e.json()})).then((function(e){p(e)}))}),[]),Object(u.jsxs)("div",{className:"pantrySection",children:[Object(u.jsx)("h2",{children:" Home of Recipes"}),Object(u.jsx)("p",{children:" All recipes created by all users are available here. Any ingredients you already own in your pantry will show up green, any ingredients you need to acquire will show up white"}),Object(u.jsx)("div",{children:r?Object(u.jsx)(J,{resetForm:function(){i(!r)},foods:f,newRecipe:function(e){d([].concat(Object(x.a)(j),[e]))}}):Object(u.jsx)(O.a,{variant:"primary",onClick:function(){i(!r)},children:"Create New Recipe"})}),j.map((function(e){return Object(u.jsx)(B,{recipe:e,pantry:t,recipeRemoval:m},e.id)}))]})};var Q=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(s.a)(r,2),j=i[0],d=i[1];function b(e){var t=j.filter((function(t){return t.id!==e}));d(t)}return Object(a.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){c(e.username),fetch("/pantryitems").then((function(e){e.ok&&e.json().then((function(e){return d(e)}))}))}))}))}),[]),n?Object(u.jsx)("div",{className:"Body",children:Object(u.jsxs)(o.BrowserRouter,{children:[Object(u.jsx)(T,{setUser:c}),Object(u.jsxs)(l.h,{children:[Object(u.jsx)(l.e,{exact:!0,path:"/",element:Object(u.jsx)(p,{user:n})}),Object(u.jsx)(l.e,{exact:!0,path:"/inventory",element:Object(u.jsx)(R,{pantry:j,deletePantryItem:b,user:n})}),Object(u.jsx)(l.e,{exact:!0,path:"/allFoods",element:Object(u.jsx)(S,{finalizeAdd:function(e,t){if(0===j.filter((function(e){return e.name===t.name})).length){t.pantryitems.push(e);var n=j;n.push(t),d(n)}else fetch("/pantryitems").then((function(e){return e.json()})).then((function(e){return d(e)}))}})}),Object(u.jsx)(l.e,{exact:!0,path:"/ingredients",element:Object(u.jsx)(w,{pantry:j,deletePantryItem:b})}),Object(u.jsx)(l.e,{exact:!0,path:"/spices",element:Object(u.jsx)(N,{pantry:j,deletePantryItem:b})}),Object(u.jsx)(l.e,{exact:!0,path:"/snacks",element:Object(u.jsx)(D,{pantry:j,deletePantryItem:b})}),Object(u.jsx)(l.e,{exact:!0,path:"/meals",element:Object(u.jsx)(L,{pantry:j,deletePantryItem:b})}),Object(u.jsx)(l.e,{exact:!0,path:"/recipes",element:Object(u.jsx)(Y,{pantry:j})})]})]})}):Object(u.jsx)(h,{login:function(e){c(e),fetch("/pantryitems").then((function(e){e.ok&&e.json().then((function(e){return d(e)}))}))}})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};n(105);i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(Q,{})}),document.getElementById("root")),z()},87:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.a6b5504e.chunk.js.map